### 内存空间

#### 栈

```
栈的结构是后进先出，先放进去的肯定是最后才能被使用
```
![栈](http://resource.muyiy.cn/image/2019-07-24-060213.jpg)

#### 堆

```
堆数据结构是一种树状结构，存取方式类似于JSON中的key-value，是一种无序的，只需要知道key就可以拿到值
```

#### 队列

```
队列是一种先进先出（FIFO）的数据结构，这是事件循环（Event Loop）的基础结构
```
![队列](http://resource.muyiy.cn/image/2019-07-24-60214.jpg)

#### 变量存放

- 基本类型
> 保存在栈内存中，因为这些类型在内存中分别战友固定大小的空间，通过按值来访问。
> 一共有6中String、Number、Boolean、null、undefined、Symbol

- 引用类型
>保存在堆内存中，因为这种值的大小不固定，不能保存在栈内存中，但内存地址的大小是固定的，所以只把内存地址存在栈内存中;
>当查询引用类型的变量时，先从栈中读取内存地址，再通过地址找到堆中的值，**这叫按引用访问**

![内存](http://resource.muyiy.cn/image/2019-07-24-060214.png)

> 在计算机的数据结构中，栈比堆的运算速度快，Object是一个复杂的结构且可以扩展：数组可扩充、对象可添加属性，都可以增删改查；
> 将他们放在堆中是为了不影响栈的效率，通过引用的方式查找到堆中的实际对象再进行操作，所以查找引用类型值的时候先去栈查找再去堆查找

```
var a = 20;
var b = a;
b = 30;
```

```
var a = { name: 'xx' };
var b = a;
b.name = 'cc';
```

```
var a = { name: 'xx' };
var b = a;
a = null;
```

>JavaScript的内存生命周期是
```
1.分配你所需要的内存
2.使用分配到的内存（读、写）
3.不需要时将其释放、归还
```

```
局部作用域中，当函数执行完毕，局部变量就会被垃圾回收机制回收
```

```
var a = {n: 1};
var b = a;
a.x = a = {n: 2};

a.x 	// --> undefined
b.x 	// --> {n: 2}
```
```
注意：.的优先级比=高
赋值操作是从右到左
a.x = undefined
a = {n:2}
此时b = a = {n:2}
a = {n:1, x: undefined}
b.x = a.x = {n:2}

```

